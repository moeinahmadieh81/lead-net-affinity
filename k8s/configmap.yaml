apiVersion: v1
kind: ConfigMap
metadata:
  name: lead-config
  namespace: lead-framework
data:
  # LEAD Framework Configuration
  monitoring_interval: "30s"
  resource_threshold: "80.0"
  latency_threshold: "100ms"
  prometheus_url: "http://prometheus.monitoring.svc.cluster.local:9090"
  kubernetes_namespace: "lead-framework"
  output_directory: "/app/k8s-manifests"
  bandwidth_weight: "0.4"
  hops_weight: "0.3"
  geo_distance_weight: "0.2"
  availability_zone_weight: "0.1"
  
  # Service Configuration
  service_config.json: |
    {
      "services": [
        {
          "id": "fe",
          "name": "frontend",
          "replicas": 3,
          "rps": 1000,
          "network_topology": {
            "availability_zone": "us-west-1a",
            "bandwidth": 1000,
            "hops": 0,
            "geo_distance": 0
          }
        },
        {
          "id": "src",
          "name": "search",
          "replicas": 2,
          "rps": 800,
          "network_topology": {
            "availability_zone": "us-west-1b",
            "bandwidth": 800,
            "hops": 1,
            "geo_distance": 100
          }
        },
        {
          "id": "usr",
          "name": "user",
          "replicas": 2,
          "rps": 600,
          "network_topology": {
            "availability_zone": "us-west-1a",
            "bandwidth": 800,
            "hops": 1,
            "geo_distance": 0
          }
        },
        {
          "id": "rcm",
          "name": "recommendation",
          "replicas": 1,
          "rps": 400,
          "network_topology": {
            "availability_zone": "us-west-1c",
            "bandwidth": 600,
            "hops": 2,
            "geo_distance": 200
          }
        },
        {
          "id": "rsv",
          "name": "reservation",
          "replicas": 2,
          "rps": 700,
          "network_topology": {
            "availability_zone": "us-west-1b",
            "bandwidth": 800,
            "hops": 1,
            "geo_distance": 100
          }
        }
      ],
      "dependencies": [
        {"from": "fe", "to": "src"},
        {"from": "fe", "to": "usr"},
        {"from": "fe", "to": "rcm"},
        {"from": "fe", "to": "rsv"}
      ],
      "gateway": "fe"
    }
